<!-- hello world -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // randomly returns Rock, Paper, or Scissors 
        function  generateComputerChoice() {
            const rps = ['rock', 'paper', 'scissors'];
            const random = Math.floor(Math.random() * rps.length);
            return(rps[random]);
        }
        /* compares the users choice and computers choice and declares if the user
        won or lost */
        function decideWinner(userChoice, computerChoice) {
            userChoice = userChoice.toLowerCase();
            let winnerAnnouncement = (`you win ${userChoice} beats ${computerChoice}`);
            let loserAnnouncement = (`you loose ${computerChoice} beats ${userChoice}`);
            
            switch (userChoice) {
                case computerChoice:
                    return (`Tie! You both played ${userChoice}. No Point!`);
                    break;

                case 'rock':
                    if (computerChoice == 'scissors') {
                        return (winnerAnnouncement);
                    }
                    else {
                        return (loserAnnouncement);
                    }
                    break;
                
                case 'paper':
                     if (computerChoice == 'rock') {
                        return (winnerAnnouncement);
                    }
                    else {
                        return (loserAnnouncement);
                    }
                    break;
                case 'scissors':
                    if (computerChoice == 'rock') {
                        return (winnerAnnouncement);
                    }
                    else {
                        return (loserAnnouncement);
                    }
                    break
                
            }
            }

        // Logs the amount of wins and losses for the user in the console

        function announceScore(win, loss) {
            console.log(`Score: ${win} win, ${loss} losses`);
        }
        /* Loop that makes sure a response of rock, paper, or scissors is given 
        given before breaking*/
        function confirmResponse(){
            let choiceArray = ['rock', 'paper', 'scissors']
            let userChoice;
            while (true) {
                userChoice = prompt('Rock, Paper, or Scissors')
                userChoice = userChoice.toLowerCase();
                if (choiceArray.indexOf(userChoice) > -1) {
                    return(userChoice);
                    break;
                }
                else {
                    alert('Please enter "Rock", "Paper" or "Scissors"');
                    }
                        }
                                }
          /* creates a best of 5 rock, paper, scissors game. Awarding the user
          a point for win point for a win and a loss point for a loss. The
          round is not counted if there is a tie. */

        function game() {
            let win = 0;
            let loss = 0;
            alert('Lets Play Rock Paper Scissors! Best of 5!')
            for (i = 0; i < 5; i++){
                userChoice = confirmResponse();
                let roundWinner = decideWinner(userChoice,  
                generateComputerChoice());
                /* if win/loss is in the string add a win/loss. If there isa tie 
                do not count that round in the 5 round total. Call announceScore
                at the end of each round */
                console.log(roundWinner);
                if (roundWinner.search('win') > -1){
                    win++;
                    if (win === 3){
                        announceScore(win, loss);
                        break;
                    }
                }
                else if(roundWinner.search('Tie') > -1){
                    i--;
                }
                else {
                    loss++;
                    if (loss === 3) {
                        announceScore(win, loss);
                        break;
                    }
                } 
                announceScore(win, loss);
            }
            // Best of 5 game has ended. Notify user if they won or lost
            if (win > loss){
                console.log('You Won!');
            }
            else {
                console.log('You Lost!');
            }
    }
        game();

    </script>
</body>
</html>